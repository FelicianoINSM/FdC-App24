#:kivy 2.3.0

TabManager:
    Home:
    Menu:
    Historial:
    Vermas:


<TextLabel@Label>:
    color: 1, 1, 1, 1

<Button>:
    color: 1, 1, 1, 1
    bold: True

<Home>:
    name: "home"

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'top'
        padding: 30

        canvas.before:
            Color:
                rgba: 0.21, 0.21, 0.21, 1  
            Rectangle:
                pos: self.pos
                size: self.size
    
        GridLayout:
            cols: 1
            size_hint: (1, 0.2)
            row_default_height: '50dp'
            row_force_default: True

            TextLabel:
                text: "Sistema de Riego"
                font_size: 68
                bold: True
            TextLabel:
                text: "INSM 2024"
                font_size: 40
            

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'



        BoxLayout:
            orientation: 'vertical'
            spacing: '30dp'
            size_hint: 0.5, 0.6

            TextLabel:
                text: "ASPERSORES"
                font_size: 55
                bold: True
            Switch:
                id: aspersores

            TextLabel:
                text: "Temperatura"
                font_size: 40
                bold: True
            TextLabel:
                id: temp
                text: "34°"
                font_size: 44
            TextLabel:
                text: "Humedad ambiente"
                font_size: 40
                bold: True
            TextLabel:
                id: env_humidity
                text: "45%"
                font_size: 44
            TextLabel:
                text: "Humedad del suelo"
                font_size: 40
                bold: True
            TextLabel:
                id: humidity
                text: "97%"
                font_size: 44
            TextLabel:
                text: "Ultimo riego"
                font_size: 40
                bold: True
            TextLabel:
                id: last_time
                text: "22:30"
                font_size: 44
                                   
    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'bottom'
        padding: '30dp'

        Button:
            size_hint: 0.2, 0.1
            background_color: 0.21, 0.21, 0.21, 0
            always_release: True

            on_press:
                burger_image.source = 'images/menu_pressed.png'

            on_release:
                burger_image.source = 'images/menu.png'
                app.root.current = "menu"
                root.manager.transition.direction = "left"

            Image:
                id: burger_image
                source: 'images/menu.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

            
            

<Menu>:
    name: "menu"
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        
        canvas.before:
            Color:
                rgba: 0.21, 0.21, 0.21, 1  
            Rectangle:
                pos: self.pos
                size: self.size

        GridLayout:
            size_hint: 0.75, 0.3
            cols: 1
            spacing: '20dp'

            Button:
                text: "Programar\nHORARIO de riego"
                text_size: self.width - dp(30), None
                font_size: '24dp'
            Button:
                text: "Ver\nHISTORICO"
                text_size: self.width - dp(30), None
                font_size: '24dp'
                
                on_release:
                    "burger_image.source = 'images/menu.png'"
                    app.root.current = "historial"
                    root.manager.transition.direction = "left"

                    
            Button:
                text: "Configuración\nde la APP"
                text_size: self.width - dp(30), None
                font_size: '24dp'
                

    AnchorLayout:
        anchor_x: 'left'
        anchor_y: 'bottom'
        padding: '30dp'

        Button:
            size_hint: 0.2, 0.1
            background_color: 0.21, 0.21, 0.21, 0
            always_release: True

            on_press:
                return_image.source = 'images/return_pressed.png'

            on_release:
                return_image.source = 'images/return.png'
                app.root.current = "home"
                root.manager.transition.direction = "left"

            Image:
                id: return_image
                source: 'images/return.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

<Historial>:
    name: "historial"
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'top'
        padding: 0

        canvas.before:
            Color:
                rgba: 0.73, 0.6, 0.95, 0.8
            Rectangle:
                pos: self.pos
                size: self.size
    
        GridLayout:
            cols: 6
            size_hint: (1, 0.2)
            row_default_height: '100dp'
            row_force_default: True
            canvas.before:
                Color:
                    rgba: 0.19, 0, 0.294, 0.6  # Color gris oscuro
                Rectangle:
                    pos: self.pos
                    size: self.size
            TextLabel:
                text: "  Día"
                font_size: 14
                bold: True
            TextLabel:
                text: "Fecha"
                font_size: 14
                bold: True
            TextLabel:
                text: "Inicio"
                font_size: 14
                bold: True
            
            TextLabel:
                text: "Final"
                font_size: 14
                bold: True
            
            TextLabel:
                text: "Litros"
                font_size: 14
                bold: True

            TextLabel:
                text: "Humedad"
                font_size: 14
                bold: True

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        padding: 40

        canvas.before:
            Color:
                rgba: 1, 1, 1, 0.8
            Rectangle:
                pos: (0, 80)
                size: (600, 400)

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'top'
        padding: [0, 120]
            
        GridLayout:

            id: hi
            cols: 6
            size_hint: (1, 0) 
            height: self.minimum_height 
            row_default_height: '65' 
            row_force_default: True
            spacing: [0, 0]

            canvas.before:
                Color:
                    rgba: 0.73, 0.6, 0.95, 0.8
                Line:
                    points: [100, 80, 100, 480]
                Line:
                    points: [200, 80, 200, 480]
                Line:
                    points: [300, 80, 300, 480]
                Line:
                    points: [400, 80, 400, 480]
                Line:
                    points: [500, 80, 500, 480]

            

    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'bottom'  # Ajusta el anclaje para que los botones estén en la parte inferior
        padding: 17

        Button:

            size_hint: 0.2, 0.1

            background_color: 0.21, 0.21, 0.21, 0


            on_press:

                verm_image.source = 'images/verm_pressed.png'

            on_release:

                verm_image.source = 'images/verm.png'

                app.root.current = "ver"
                root.manager.transition.direction = "left"

            Image:

                id: verm_image

                source: 'images/verm.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

    AnchorLayout:

        anchor_x: 'left'
        anchor_y: 'bottom'  # Ajusta el anclaje para que los botones estén en la parte inferior
        padding: 17

        Button:
            size_hint: 0.2, 0.1
            background_color: 0.21, 0.21, 0.21, 0


            on_press:

                returnv_image.source = 'images/returnv_pressed.png'

            on_release:

                returnv_image.source = 'images/returnv.png'

                app.root.current = "menu"

                root.manager.transition.direction = "right"

            Image:

                id: returnv_image
                source: 'images/returnv.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
<Vermas>:
    name: "ver"

    AnchorLayout:

        anchor_x: 'center'
        anchor_y: 'top'
        padding: 0

        canvas.before:

            Color:
                rgba: 0.73, 0.6, 0.95, 0.8
            Rectangle:
                pos: self.pos
                size: self.size
    
        GridLayout:
            cols: 6
            size_hint: (1, 0.2)
            row_default_height: '100dp'
            row_force_default: True
            canvas.before:

                Color:

                    rgba: 0.19, 0, 0.294, 0.6  # Color gris oscuro

                Rectangle:

                    pos: self.pos
                    size: self.size

            TextLabel:
                text: "  Día"
                font_size: 14
                bold: True
            TextLabel:
                text: "Fecha"
                font_size: 14
                bold: True
            TextLabel:
                text: "Inicio"
                font_size: 14
                bold: True
            
            TextLabel:
                text: "Final"
                font_size: 14
                bold: True
            
            TextLabel:
                text: "Litros"
                font_size: 14
                bold: True

            TextLabel:
                text: "Humedad"
                font_size: 14
                bold: True

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        padding: 40

        canvas.before:
            Color:
                rgba: 1, 1, 1, 0.8
            Rectangle:
                pos: (0, 100)
                size: (600, 380)

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        padding: [20, 140]
            
        ScrollView:
        
            GridLayout:
            
                id: hi
                cols: 6
                spacing: [50, 0]
                size_hint_y: None  # Indicamos que la altura no es automática
                height: self.minimum_height  # Ajustamos la altura al mínimo necesario
                row_default_height: '75' 
                row_force_default: True

                canvas.before:
                    Color:
                        rgba: 0.73, 0.6, 0.95, 0.8
                    Line:
                        points: [70, self.y, 70, self.y + self.height]
                    Line:
                        points: [184, self.y, 184, self.y + self.height]
                    Line:
                        points: [288, self.y, 288, self.y + self.height]
                    Line:
                        points: [387, self.y, 387, self.y + self.height]
                    Line:
                        points: [486, self.y, 486, self.y + self.height]
                
    AnchorLayout:

        anchor_x: 'center'
        anchor_y: 'bottom'  # Ajusta el anclaje para que los botones estén en la parte inferior
        padding: 17

        Button:
            size_hint: 0.2, 0.1
            background_color: 0.21, 0.21, 0.21, 0


            on_press:

                returnv_image.source = 'images/returnv_pressed.png'

            on_release:

                returnv_image.source = 'images/returnv.png'

                app.root.current = "historial"

                root.manager.transition.direction = "right"

            Image:

                id: returnv_image
                source: 'images/returnv.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y